<mat-toolbar>
  <mat-button-toggle-group
    #profile="matButtonToggleGroup"
    name="profile"
    aria-label="Profile">

    <mat-button-toggle value="summary" [checked]="true"
      >Account Summary</mat-button-toggle>

    <mat-button-toggle value="profitLoss" [checked]="false"
      >Profit & Loss</mat-button-toggle>
    
    <mat-button-toggle value="bettingHistory" [checked]="false"
      >Betting History</mat-button-toggle>

    <mat-button-toggle value="transactions"
      >System Transactions</mat-button-toggle>

    <mat-button-toggle value="loginHistory">Login History</mat-button-toggle>

  </mat-button-toggle-group>

  <h3 class="cs-super-profile-account-name" (click)="check()">Account Name</h3>

</mat-toolbar>

<div class="cs-summary-card-container">
  
  <mat-card>

    <div
      [@contentInOut]
      *ngIf="profile.value == 'summary'"
      class="cs-summary-container"
    >
      <div>Username: &nbsp; <span> {{currentUser?.userName}} </span></div>
      <div>Name: &nbsp; <span> {{currentUser?.name}} </span></div>
      <div>E-mail: &nbsp; <span> {{currentUser?.email}} </span></div>
      <div>Phone Number: &nbsp; <span> {{currentUser?.phoneNumber}} </span></div>
      <div>Risk: &nbsp; <span> {{currentUser?.risk}} </span></div>
      <div>Commission: &nbsp; <span> {{this.sharedService.formatNumber( currentUser?.commission*100)}}% </span></div>
      <div>Wallet Currency: &nbsp; <span> {{currentUser?.wallet?.currency}} </span></div>
      <div>Wallet Balance: &nbsp; <span> {{this.sharedService.formatNumber( currentUser?.wallet?.balance )}} </span></div>
      <div>Active: &nbsp; <span> {{currentUser?.isActive}} </span></div>
      <div>Role: &nbsp; <span> {{currentUser?.role}} </span></div>
      
    </div>

    <div [@contentInOut] *ngIf="profile.value == 'profitLoss'">
      <div class="cs-d-flex">
        <mat-form-field appearance="fill">
          <mat-label>Period</mat-label>
          <mat-select name="pl">
            <mat-option
              *ngFor="let period of transactionTypesSelect"
              [value]="period"
            >
              {{ period }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" style="margin-left: 10px">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
            <input
              matStartDate
              formControlName="start"
              placeholder="Start date"
            />
            <input matEndDate formControlName="end" placeholder="End date" />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
          <mat-error
            *ngIf="range.controls.start.hasError('matStartDateInvalid')"
            >Invalid start date</mat-error
          >
          <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')"
            >Invalid end date</mat-error
          >
        </mat-form-field>
      </div>

      <table mat-table [dataSource]="profitLossData" style="min-width: 870px">
        <ng-container matColumnDef="market">
          <th mat-header-cell *matHeaderCellDef>Market</th>
          <td mat-cell *matCellDef="let row">{{ row.market }}</td>
        </ng-container>
        <ng-container matColumnDef="startTime">
          <th mat-header-cell *matHeaderCellDef>Start Time</th>
          <td mat-cell *matCellDef="let row">{{ row.startTime }}</td>
        </ng-container>
        <ng-container matColumnDef="settledDate">
          <th mat-header-cell *matHeaderCellDef>Settled Date</th>
          <td mat-cell *matCellDef="let row">{{ row.settledDate }}</td>
        </ng-container>
        <ng-container matColumnDef="profitLoss">
          <th mat-header-cell *matHeaderCellDef>Profit/Loss</th>
          <td mat-cell *matCellDef="let row">{{ row.profitLoss }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsProfitLoss"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumnsProfitLoss"
        ></tr>
      </table>
      <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
      </mat-paginator>
    </div>

    <div [@contentInOut] *ngIf="profile.value == 'bettingHistory'">
      <div class="cs-d-flex">
        
        <!-- <mat-form-field appearance="fill">
          <mat-label>Period</mat-label>
          <mat-select name="pl">
            <mat-option
              *ngFor="let period of transactionTypesSelect"
              [value]="period"
            >
              {{ period }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <!-- <div class="example-button-container">
          <button mat-fab color="warn" aria-label="Example icon button with a home icon">
            <mat-icon>refresh</mat-icon>
          </button>
        </div> -->

        <div class="example-button-container">
          <button mat-fab class="reload-btn" (click)="loadUsersBet()"
          [disabled]="disableReloadBtn(rangeBets.controls)" >
            <mat-icon>refresh</mat-icon>
          </button>
        </div>

        






        <mat-form-field appearance="fill" style="margin-left: 10px">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input [formGroup]="rangeBets" [rangePicker]="picker">
            <input
              matStartDate
              formControlName="start"
              placeholder="Start date"
              
            />
            
            <input matEndDate formControlName="end" placeholder="End date"  />
            
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
          <mat-error
            *ngIf="rangeBets.controls.start.hasError('matStartDateInvalid')"
            >Invalid start date</mat-error
          >
          <mat-error *ngIf="rangeBets.controls.end.hasError('matEndDateInvalid')"
            >Invalid end date</mat-error
          >
        </mat-form-field>

      </div>

      <table
        mat-table
        [dataSource]="bettingHistoryData"
        style="min-width: 870px"
      >
        <ng-container matColumnDef="market">
          <th mat-header-cell *matHeaderCellDef>Market</th>
          <td mat-cell *matCellDef="let row">{{ row.market }}</td>
        </ng-container>
        <ng-container matColumnDef="selection">
          <th mat-header-cell *matHeaderCellDef>Selection</th>
          <td mat-cell *matCellDef="let row">{{ row.selection }}</td>
        </ng-container>
        <ng-container matColumnDef="bidType">
          <th mat-header-cell *matHeaderCellDef>Bid Type</th>
          <td mat-cell *matCellDef="let row">{{ row.bidType }}</td>
        </ng-container>
        <ng-container matColumnDef="betId">
          <th mat-header-cell *matHeaderCellDef>Bet Id</th>
          <td mat-cell *matCellDef="let row">{{ row.betId }}</td>
        </ng-container>

        <ng-container matColumnDef="betPlace">
          <th mat-header-cell *matHeaderCellDef>Bet Place</th>
          <td mat-cell *matCellDef="let row">{{ row.betPlace }}</td>
        </ng-container>

        <ng-container matColumnDef="stake">
          <th mat-header-cell *matHeaderCellDef>Stake</th>
          <td mat-cell *matCellDef="let row">{{ row.stake }}</td>
        </ng-container>

        <ng-container matColumnDef="matchedSize">
          <th mat-header-cell *matHeaderCellDef>Matched Size</th>
          <td mat-cell *matCellDef="let row">{{ row.matchedSize }}</td>
        </ng-container>

        <ng-container matColumnDef="avgOddsMatched">
          <th mat-header-cell *matHeaderCellDef>avg. Odds Matched</th>
          <td mat-cell *matCellDef="let row">{{ row.avgOddsMatched }}</td>
        </ng-container>

        <ng-container matColumnDef="pl">
          <th mat-header-cell *matHeaderCellDef>P&L</th>
          <td mat-cell *matCellDef="let row">{{ row.pl }}</td>
        </ng-container>

        <tr
          mat-header-row
          *matHeaderRowDef="displayedColumnsBettingHistory"
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumnsBettingHistory"
        ></tr>
      </table>
      <mat-paginator 
      [length]="lengthBets"
      [pageSize]="pageSize"
      [pageSizeOptions]="this.sharedService.pageSizeOptions"
      (page)="updatePageBets($event)"
      >
      </mat-paginator>
    </div>

    <div [@contentInOut] *ngIf="profile.value == 'transactions'">
      <div class="cs-d-flex">

        <div class="example-button-container">
          <button mat-fab class="reload-btn" (click)="loadUsersTransactions()" 
          [disabled]="disableReloadBtn(rangeTrans.controls)" >
            <mat-icon>refresh</mat-icon>
          </button>
        </div>

        <mat-form-field appearance="fill" style="margin-left: 10px">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input [formGroup]="rangeTrans" [rangePicker]="picker">
            <input
              matStartDate
              formControlName="start"
              placeholder="Start date"
            />
            <input matEndDate formControlName="end" placeholder="End date" />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
          <mat-error
            *ngIf="rangeTrans.controls.start.hasError('matStartDateInvalid')"
            >Invalid start date</mat-error
          >
          <mat-error *ngIf="rangeTrans.controls.end.hasError('matEndDateInvalid')"
            >Invalid end date</mat-error
          >
        </mat-form-field>
      </div>

      <table mat-table [dataSource]="transactionsData" style="min-width: 870px">
        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Date</th>
          <td mat-cell *matCellDef="let row">{{ row.createdAt }}</td>
        </ng-container>
        
        <ng-container matColumnDef="type">
          <th mat-header-cell *matHeaderCellDef>Transaction Type</th>
          <td mat-cell *matCellDef="let row">{{ row.type }}</td>
        </ng-container>
        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef>Amount</th>
          <td mat-cell *matCellDef="let row">{{ row.amount }}</td>
        </ng-container>
        
        <ng-container matColumnDef="balance change">
          <th mat-header-cell *matHeaderCellDef>Balance Change</th>
          <td mat-cell *matCellDef="let row"> 
          <span class="balance-change-container">
            {{ row.balanceBefore }} <mat-icon>arrow_right_alt</mat-icon> {{ row.balanceAfter }}
          </span>  
          </td>
        </ng-container>

        <ng-container matColumnDef="currency">
          <th mat-header-cell *matHeaderCellDef>Currency</th>
          <td mat-cell *matCellDef="let row">{{ row.currencyCode }}</td>
        </ng-container>
        <ng-container matColumnDef="balance">
          <th mat-header-cell *matHeaderCellDef>Current alance</th>
          <td mat-cell *matCellDef="let row">{{ row.user.wallet.balance }}</td>
        </ng-container>
        <ng-container matColumnDef="comment">
          <th mat-header-cell *matHeaderCellDef>Comment</th>
          <td mat-cell *matCellDef="let row">{{ row.comment }}</td>
        </ng-container>

        <ng-container matColumnDef="exchangeRate">
          <th mat-header-cell *matHeaderCellDef>Exchange Rate</th>
          <td mat-cell *matCellDef="let row">{{ row.exchangeRate }}</td>
        </ng-container>

        <!-- <ng-container matColumnDef="fromTo">
          <th mat-header-cell *matHeaderCellDef>From To</th>
          <td mat-cell *matCellDef="let row">{{ row.fromTo }}</td>
        </ng-container> -->

        <tr mat-header-row *matHeaderRowDef="displayedColumnsTransactions"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumnsTransactions"
        ></tr>
      </table>
      <mat-paginator 
      [length]="lengthTrans"
      [pageSize]="pageSize"
      [pageSizeOptions]="this.sharedService.pageSizeOptions"
      (page)="updatePageTrans($event)"
      >
      </mat-paginator>
    </div>

    <div [@contentInOut] *ngIf="profile.value == 'loginHistory'">
      <table mat-table [dataSource]="loginHistoryData" style="min-width: 800px">
        <ng-container matColumnDef="ip">
          <th mat-header-cell *matHeaderCellDef>IP</th>
          <td mat-cell *matCellDef="let row">{{ row.ip }}</td>
        </ng-container>
        <ng-container matColumnDef="createdAt">
          <th mat-header-cell *matHeaderCellDef>Created At</th>
          <td mat-cell *matCellDef="let row">{{ row.createdAt }}</td>
        </ng-container>

        <ng-container matColumnDef="isSuccessfull">
          <th mat-header-cell *matHeaderCellDef>Is Successfull</th>
          <td mat-cell *matCellDef="let row">
            <!-- {{ row.isSuccessfull | titlecase }} -->
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsLoginHistory"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumnsLoginHistory"
        ></tr>
      </table>
      <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
      </mat-paginator>
    </div>

  </mat-card>
</div>
