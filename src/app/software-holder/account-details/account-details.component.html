<mat-toolbar>
    <mat-button-toggle-group
      #profile="matButtonToggleGroup"
      name="profile"
      aria-label="Profile"
    >
      <mat-button-toggle value="summary" [checked]="true"
        >Summary</mat-button-toggle
      >
      <mat-button-toggle value="changePassword"
      *ngIf="this.authService.decodedToken.role !== 'SoftwareHolder'"
        >Change Password</mat-button-toggle
      >

      <mat-button-toggle value="bettingHistory" [checked]="false"
      >Betting History</mat-button-toggle>

      <!-- <mat-button-toggle value="forecast">Forecast</mat-button-toggle -->
      <!-- ><mat-button-toggle value="pl">P&L</mat-button-toggle> -->
      <!-- <mat-button-toggle value="totalPl">Total P&L</mat-button-toggle> -->
      <!-- <mat-button-toggle value="casinoTotal">Casino Total P&L</mat-button-toggle> -->
      <mat-button-toggle value="transactions">Transactions</mat-button-toggle>
    </mat-button-toggle-group>
  
    <h3 class="cs-super-profile-account-name">Account Name</h3>
  </mat-toolbar>
  <div class="cs-summary-card-container">
    <mat-card>
      <div
        [@contentInOut]
        *ngIf="profile.value == 'summary'"
        class="cs-summary-container"
      >
        <div>Email: &nbsp; <span>{{myUser.email}}</span> </div>
        <div>Username: &nbsp; <span>{{myUser.userName}}</span></div>
       <div>Phone Number: &nbsp; <span> {{myUser?.phoneNumber}} </span></div>
        <div>Balance: &nbsp; <span> {{this.sharedService.formatNumber( myUser?.wallet?.balance )}} </span></div>
        <div>Wallet Currency: &nbsp; <span> {{myUser?.wallet?.currency}} </span></div>
       <div>SubAccounts Balance: &nbsp; <span> {{this.sharedService.formatNumber( myUser?.subAccountBalance )}} </span></div>
        <div>Commission: &nbsp; <span>{{this.sharedService.formatNumber( myUser?.commission*100)}}%</span></div>
        <div>Active: &nbsp; <span> {{myUser?.isActive}} </span></div>
        <!-- <div>Role: &nbsp; <span> {{myUser?.role}} </span></div> -->


      </div>
      <div [@contentInOut] *ngIf="profile.value == 'changePassword'">
        <form
          [formGroup]="changePasswordForm"
          class="cs-super-change-password-form"
        >
          <mat-form-field>
            <mat-label>Old Password</mat-label>
            <input
              matInput
              placeholder="Old Password"
              formControlName="oldPassword"
              required
            />
            <mat-error *ngIf="changePasswordForm.controls.oldPassword.invalid"
              >This field is required.</mat-error
            >
          </mat-form-field>
  
          <mat-form-field>
            <mat-label>New Password</mat-label>
            <input
              matInput
              placeholder="New Password"
              formControlName="newPassword"
              required
            />
            <mat-error *ngIf="changePasswordForm.controls.newPassword.invalid"
              >This field is required.</mat-error
            >
          </mat-form-field>
  
          <mat-form-field>
            <mat-label>New Password Confirm</mat-label>
            <input
              matInput
              placeholder="New Password Confirm"
              formControlName="newPasswordConfirm"
              required
            />
            <mat-error
              *ngIf="changePasswordForm.controls.newPasswordConfirm.invalid"
              >This field is required.</mat-error
            >
          </mat-form-field>
        </form>
        <button
          mat-button
          color="primary"
          style="display: flex; margin-left: auto"
          [disabled]="!changePasswordForm.valid"
        >
          Save
        </button>
      </div>
      <div [@contentInOut] *ngIf="profile.value == 'forecast'">
        <table mat-table [dataSource]="forecastData" style="min-width: 700px">
          <ng-container matColumnDef="market">
            <th mat-header-cell *matHeaderCellDef>Market</th>
            <td mat-cell *matCellDef="let row">{{ row.market }}</td>
          </ng-container>
  
          <ng-container matColumnDef="startDate">
            <th mat-header-cell *matHeaderCellDef>Start Date</th>
            <td mat-cell *matCellDef="let row">{{ row.startDate }}</td>
          </ng-container>
  
          <ng-container matColumnDef="liability">
            <th mat-header-cell *matHeaderCellDef>Liability</th>
            <td mat-cell *matCellDef="let row">{{ row.liability }}</td>
          </ng-container>
  
          <ng-container matColumnDef="profit">
            <th mat-header-cell *matHeaderCellDef>Profit</th>
            <td mat-cell *matCellDef="let row">{{ row.profit }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnsForecast"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumnsForecast"
          ></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
        </mat-paginator>
      </div>
      <div [@contentInOut] *ngIf="profile.value == 'pl'">
        <div class="cs-d-flex">
          <mat-form-field appearance="fill">
            <mat-label>Period</mat-label>
            <mat-select name="pl">
              <mat-option *ngFor="let period of periodSelect" [value]="period">
                {{ period }}
              </mat-option>
            </mat-select>
          </mat-form-field>
  
          <mat-form-field appearance="fill" style="margin-left: 10px">
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
              <input
                matStartDate
                formControlName="start"
                placeholder="Start date"
              />
              <input matEndDate formControlName="end" placeholder="End date" />
            </mat-date-range-input>
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
            <mat-error
              *ngIf="range.controls.start.hasError('matStartDateInvalid')"
              >Invalid start date</mat-error
            >
            <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')"
              >Invalid end date</mat-error
            >
          </mat-form-field>
        </div>
  
        <table mat-table [dataSource]="pLData" style="min-width: 700px">
          <ng-container matColumnDef="user">
            <th mat-header-cell *matHeaderCellDef>User</th>
            <td mat-cell *matCellDef="let row">{{ row.user }}</td>
          </ng-container>
          <ng-container matColumnDef="pl">
            <th mat-header-cell *matHeaderCellDef>P&L</th>
            <td mat-cell *matCellDef="let row">{{ row.pl }}</td>
          </ng-container>
          <ng-container matColumnDef="mpl">
            <th mat-header-cell *matHeaderCellDef>M P&L</th>
            <td mat-cell *matCellDef="let row">{{ row.mpl }}</td>
          </ng-container>
          <ng-container matColumnDef="pt">
            <th mat-header-cell *matHeaderCellDef>PT</th>
            <td mat-cell *matCellDef="let row">{{ row.pt }}</td>
          </ng-container>
          <ng-container matColumnDef="commission">
            <th mat-header-cell *matHeaderCellDef>Commission</th>
            <td mat-cell *matCellDef="let row">{{ row.commission }}</td>
          </ng-container>
          <ng-container matColumnDef="currentCommission">
            <th mat-header-cell *matHeaderCellDef>Current Commission</th>
            <td mat-cell *matCellDef="let row">{{ row.currentCommission }}</td>
          </ng-container>
          <ng-container matColumnDef="total">
            <th mat-header-cell *matHeaderCellDef>Total</th>
            <td mat-cell *matCellDef="let row">{{ row.total }}</td>
          </ng-container>
  
          <ng-container matColumnDef="mTotal">
            <th mat-header-cell *matHeaderCellDef>M Total</th>
            <td mat-cell *matCellDef="let row">{{ row.mTotal }}</td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayedColumnsPL"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsPL"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
        </mat-paginator>
      </div>
      <div [@contentInOut] *ngIf="profile.value == 'totalPl'">
        <div class="cs-d-flex">
          <mat-form-field appearance="fill">
            <mat-label>Period</mat-label>
            <mat-select name="pl">
              <mat-option *ngFor="let period of periodSelect" [value]="period">
                {{ period }}
              </mat-option>
            </mat-select>
          </mat-form-field>
  
          <mat-form-field appearance="fill" style="margin-left: 10px">
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
              <input
                matStartDate
                formControlName="start"
                placeholder="Start date"
              />
              <input matEndDate formControlName="end" placeholder="End date" />
            </mat-date-range-input>
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
            <mat-error
              *ngIf="range.controls.start.hasError('matStartDateInvalid')"
              >Invalid start date</mat-error
            >
            <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')"
              >Invalid end date</mat-error
            >
          </mat-form-field>
        </div>
  
        <table mat-table [dataSource]="totalPLData" style="min-width: 700px">
          <ng-container matColumnDef="user">
            <th mat-header-cell *matHeaderCellDef>User</th>
            <td mat-cell *matCellDef="let row">{{ row.user }}</td>
          </ng-container>
          <ng-container matColumnDef="pl">
            <th mat-header-cell *matHeaderCellDef>P&L</th>
            <td mat-cell *matCellDef="let row">{{ row.pl }}</td>
          </ng-container>
          <ng-container matColumnDef="mpl">
            <th mat-header-cell *matHeaderCellDef>M P&L</th>
            <td mat-cell *matCellDef="let row">{{ row.mpl }}</td>
          </ng-container>
          <ng-container matColumnDef="pt">
            <th mat-header-cell *matHeaderCellDef>PT</th>
            <td mat-cell *matCellDef="let row">{{ row.pt }}</td>
          </ng-container>
          <ng-container matColumnDef="commission">
            <th mat-header-cell *matHeaderCellDef>Commission</th>
            <td mat-cell *matCellDef="let row">{{ row.commission }}</td>
          </ng-container>
          <ng-container matColumnDef="currentCommission">
            <th mat-header-cell *matHeaderCellDef>Current Commission</th>
            <td mat-cell *matCellDef="let row">{{ row.currentCommission }}</td>
          </ng-container>
          <ng-container matColumnDef="total">
            <th mat-header-cell *matHeaderCellDef>Total</th>
            <td mat-cell *matCellDef="let row">{{ row.total }}</td>
          </ng-container>
  
          <ng-container matColumnDef="mTotal">
            <th mat-header-cell *matHeaderCellDef>M Total</th>
            <td mat-cell *matCellDef="let row">{{ row.mTotal }}</td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayedColumnstotalPL"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnstotalPL"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
        </mat-paginator>
      </div>
      <div [@contentInOut] *ngIf="profile.value == 'casinoTotal'">
        <div class="cs-d-flex">
          <mat-form-field appearance="fill">
            <mat-label>Period</mat-label>
            <mat-select name="pl">
              <mat-option *ngFor="let period of periodSelect" [value]="period">
                {{ period }}
              </mat-option>
            </mat-select>
          </mat-form-field>
  
          <mat-form-field appearance="fill" style="margin-left: 10px">
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
              <input
                matStartDate
                formControlName="start"
                placeholder="Start date"
              />
              <input matEndDate formControlName="end" placeholder="End date" />
            </mat-date-range-input>
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
            <mat-error
              *ngIf="range.controls.start.hasError('matStartDateInvalid')"
              >Invalid start date</mat-error
            >
            <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')"
              >Invalid end date</mat-error
            >
          </mat-form-field>
        </div>
  
        <table mat-table [dataSource]="casinoTotalData" style="min-width: 700px">
          <ng-container matColumnDef="user">
            <th mat-header-cell *matHeaderCellDef>User</th>
            <td mat-cell *matCellDef="let row">{{ row.user }}</td>
          </ng-container>
          <ng-container matColumnDef="pl">
            <th mat-header-cell *matHeaderCellDef>P&L</th>
            <td mat-cell *matCellDef="let row">{{ row.pl }}</td>
          </ng-container>
          <ng-container matColumnDef="mpl">
            <th mat-header-cell *matHeaderCellDef>M P&L</th>
            <td mat-cell *matCellDef="let row">{{ row.mpl }}</td>
          </ng-container>
          <ng-container matColumnDef="pt">
            <th mat-header-cell *matHeaderCellDef>PT</th>
            <td mat-cell *matCellDef="let row">{{ row.pt }}</td>
          </ng-container>
          <ng-container matColumnDef="commission">
            <th mat-header-cell *matHeaderCellDef>Commission</th>
            <td mat-cell *matCellDef="let row">{{ row.commission }}</td>
          </ng-container>
          <ng-container matColumnDef="currentCommission">
            <th mat-header-cell *matHeaderCellDef>Current Commission</th>
            <td mat-cell *matCellDef="let row">{{ row.currentCommission }}</td>
          </ng-container>
          <ng-container matColumnDef="total">
            <th mat-header-cell *matHeaderCellDef>Total</th>
            <td mat-cell *matCellDef="let row">{{ row.total }}</td>
          </ng-container>
  
          <ng-container matColumnDef="mTotal">
            <th mat-header-cell *matHeaderCellDef>M Total</th>
            <td mat-cell *matCellDef="let row">{{ row.mTotal }}</td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayedColumnsCasinoTotal"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumnsCasinoTotal"
          ></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
        </mat-paginator>
      </div>
      <div [@contentInOut] *ngIf="profile.value == 'bettingHistory'">
        <div class="cs-d-flex">
          <div class="example-button-container">
            <button mat-fab class="reload-btn" (click)="loadBets()"
            [disabled]="disableReloadBtn(rangeBets.controls)" >
              <mat-icon>refresh</mat-icon>
            </button>
          </div>
  
          
  
  
  
  
  
  
          <mat-form-field appearance="fill" style="margin-left: 10px">
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [formGroup]="rangeBets" [rangePicker]="picker">
              <input
                matStartDate
                formControlName="start"
                placeholder="Start date"
                
              />
              
              <input matEndDate formControlName="end" placeholder="End date"  />
              
            </mat-date-range-input>
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
            <mat-error
              *ngIf="rangeBets.controls.start.hasError('matStartDateInvalid')"
              >Invalid start date</mat-error
            >
            <mat-error *ngIf="rangeBets.controls.end.hasError('matEndDateInvalid')"
              >Invalid end date</mat-error
            >
          </mat-form-field>
  
        </div>
  
        <table
          mat-table
          [dataSource]="bettingHistoryData"
          style="min-width: 870px"
        >
          <ng-container matColumnDef="market">
            <th mat-header-cell *matHeaderCellDef>Market</th>
            <td mat-cell *matCellDef="let row">{{ row.market }}</td>
          </ng-container>
          <ng-container matColumnDef="selection">
            <th mat-header-cell *matHeaderCellDef>Selection</th>
            <td mat-cell *matCellDef="let row">{{ row.selection }}</td>
          </ng-container>
          <ng-container matColumnDef="bidType">
            <th mat-header-cell *matHeaderCellDef>Bid Type</th>
            <td mat-cell *matCellDef="let row">{{ row.bidType }}</td>
          </ng-container>
          <ng-container matColumnDef="betId">
            <th mat-header-cell *matHeaderCellDef>Bet Id</th>
            <td mat-cell *matCellDef="let row">{{ row.betId }}</td>
          </ng-container>
  
          <ng-container matColumnDef="betPlace">
            <th mat-header-cell *matHeaderCellDef>Bet Place</th>
            <td mat-cell *matCellDef="let row">{{ row.betPlace }}</td>
          </ng-container>
  
          <ng-container matColumnDef="stake">
            <th mat-header-cell *matHeaderCellDef>Stake</th>
            <td mat-cell *matCellDef="let row">{{ row.stake }}</td>
          </ng-container>
  
          <ng-container matColumnDef="matchedSize">
            <th mat-header-cell *matHeaderCellDef>Matched Size</th>
            <td mat-cell *matCellDef="let row">{{ row.matchedSize }}</td>
          </ng-container>
  
          <ng-container matColumnDef="avgOddsMatched">
            <th mat-header-cell *matHeaderCellDef>avg. Odds Matched</th>
            <td mat-cell *matCellDef="let row">{{ row.avgOddsMatched }}</td>
          </ng-container>
  
          <ng-container matColumnDef="pl">
            <th mat-header-cell *matHeaderCellDef>P&L</th>
            <td mat-cell *matCellDef="let row">{{ row.pl }}</td>
          </ng-container>
  
          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumnsBettingHistory"
          ></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumnsBettingHistory"
          ></tr>
        </table>
        <mat-paginator 
        [length]="lengthBets"
        [pageSize]="pageSize"
        [pageSizeOptions]="this.sharedService.pageSizeOptions"
        (page)="updatePageBets($event)"
        >
        </mat-paginator>
      </div>

      <div [@contentInOut] *ngIf="profile.value == 'transactions'">
        <div class="cs-d-flex">
  
          <div class="example-button-container">
            <button mat-fab class="reload-btn" (click)="loadUsersTransactions()" 
            [disabled]="disableReloadBtn(rangeTrans.controls)" >
              <mat-icon>refresh</mat-icon>
            </button>
          </div>
  
          <mat-form-field appearance="fill" style="margin-left: 10px">
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [formGroup]="rangeTrans" [rangePicker]="picker">
              <input
                matStartDate
                formControlName="start"
                placeholder="Start date"
              />
              <input matEndDate formControlName="end" placeholder="End date" />
            </mat-date-range-input>
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
            <mat-error
              *ngIf="rangeTrans.controls.start.hasError('matStartDateInvalid')"
              >Invalid start date</mat-error
            >
            <mat-error *ngIf="rangeTrans.controls.end.hasError('matEndDateInvalid')"
              >Invalid end date</mat-error
            >
          </mat-form-field>
        </div>
  
        <table mat-table [dataSource]="transactionsData" style="min-width: 870px">
          <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef>Date</th>
            <td mat-cell *matCellDef="let row">{{ row.createdAt }}</td>
          </ng-container>
          
          <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef>Transaction Type</th>
            <td mat-cell *matCellDef="let row">{{ row.type }}</td>
          </ng-container>

          <ng-container matColumnDef="user">
            <th mat-header-cell *matHeaderCellDef>Username</th>
            <td mat-cell *matCellDef="let row">{{ row.user.userName }}</td>
          </ng-container>

          
          <ng-container matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef>Amount</th>
            <td mat-cell *matCellDef="let row">{{ row.amount }}</td>
          </ng-container>
          
          <ng-container matColumnDef="balance change">
            <th mat-header-cell *matHeaderCellDef>Balance Change</th>
            <td mat-cell *matCellDef="let row"> 
            <span class="balance-change-container">
              {{ row.balanceBefore }} <mat-icon>arrow_right_alt</mat-icon> {{ row.balanceAfter }}
            </span>  
            </td>
          </ng-container>
  
          <ng-container matColumnDef="currency">
            <th mat-header-cell *matHeaderCellDef>Currency</th>
            <td mat-cell *matCellDef="let row">{{ row.currencyCode }}</td>
          </ng-container>
          <ng-container matColumnDef="balance">
            <th mat-header-cell *matHeaderCellDef>Current alance</th>
            <td mat-cell *matCellDef="let row">{{ row.user.wallet.balance }}</td>
          </ng-container>
          <ng-container matColumnDef="comment">
            <th mat-header-cell *matHeaderCellDef>Comment</th>
            <td mat-cell *matCellDef="let row">{{ row.comment }}</td>
          </ng-container>
  
          <ng-container matColumnDef="exchangeRate">
            <th mat-header-cell *matHeaderCellDef>Exchange Rate</th>
            <td mat-cell *matCellDef="let row">{{ row.exchangeRate }}</td>
          </ng-container>
  
          <!-- <ng-container matColumnDef="fromTo">
            <th mat-header-cell *matHeaderCellDef>From To</th>
            <td mat-cell *matCellDef="let row">{{ row.fromTo }}</td>
          </ng-container> -->
  
          <tr mat-header-row *matHeaderRowDef="displayedColumnsTransactions"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumnsTransactions"
          ></tr>
        </table>
        <mat-paginator 
        [length]="lengthTrans"
        [pageSize]="pageSize"
        [pageSizeOptions]="this.sharedService.pageSizeOptions"
        (page)="updatePageTrans($event)"
        >
        </mat-paginator>
      </div>
    </mat-card>
  </div>
  